(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[94],{1400:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/heatmap",function(){return n(4919)}])},4865:function(e,t,n){"use strict";n.d(t,{G2:function(){return a},LK:function(){return s},YF:function(){return c},eA:function(){return u},f:function(){return o},fY:function(){return l},gb:function(){return g},r5:function(){return d},r8:function(){return i},tm:function(){return h},uH:function(){return m},uj:function(){return p}});var r=n(6835);let i=1,a=16,o=!1,s=!1,l=(0,r.mi)([105.783089061,21.007448175]),u=(0,r.mi)([105.77148046,21.007552187]),d=(0,r.mi)([105.794633289,21.00786928]),c=(0,r.mi)([105.813080887,21.076551416]),m=(0,r.mi)([105.735447973,21.057766731]),g=(0,r.mi)([16.340115111,48.232346294]),h=(0,r.mi)([126.980366,37.52654]),p="https://raw.githubusercontent.com/thanktu/thanktu.github.io/main/data/kml_data.kml"},4919:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var r=n(5893),i=n(7294),a=n(9008),o=n.n(a),s=n(8240),l=n(2241),u=n(6689),d=n(988),c=n(8266);let m={stamen_terrain:{extension:"png"},stamen_terrain_background:{extension:"png"},stamen_terrain_labels:{extension:"png"},stamen_terrain_lines:{extension:"png"},stamen_toner_background:{extension:"png"},stamen_toner:{extension:"png"},stamen_toner_labels:{extension:"png"},stamen_toner_lines:{extension:"png"},stamen_toner_lite:{extension:"png"},stamen_watercolor:{extension:"jpg"},alidade_smooth:{extension:"png"},alidade_smooth_dark:{extension:"png"},alidade_satellite:{extension:"png"},outdoors:{extension:"png"},osm_bright:{extension:"png"}},g={stamen_terrain:{minZoom:0,maxZoom:18,retina:!0},stamen_toner:{minZoom:0,maxZoom:20,retina:!0},stamen_watercolor:{minZoom:1,maxZoom:18,retina:!1}};class h extends d.Z{constructor(e){let t=e.layer.indexOf("-"),n=-1==t?e.layer:e.layer.slice(0,t),r=g[n]||{minZoom:0,maxZoom:20,retina:!0},i=m[e.layer],a=e.apiKey?"?api_key="+e.apiKey:"",o=r.retina&&e.retina?"@2x":"",s=void 0!==e.url?e.url:"https://tiles.stadiamaps.com/tiles/"+e.layer+"/{z}/{x}/{y}"+o+"."+i.extension+a,l=['&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>','&copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>',c.h];e.layer.startsWith("stamen_")&&l.splice(1,0,'&copy; <a href="https://stamen.com/" target="_blank">Stamen Design</a>'),super({attributions:l,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,maxZoom:void 0!==e.maxZoom?e.maxZoom:r.maxZoom,minZoom:void 0!==e.minZoom?e.minZoom:r.minZoom,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:s,tilePixelRatio:o?2:1,wrapX:e.wrapX,zDirection:e.zDirection})}}var p=n(6263);n(6835);var x=n(9093);n(1335);var _=n(193),f=n(2991),v=n(6233),b=n(5850),w=n(3983),y=n(8326);let S={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},Z=["#00f","#0ff","#0f0","#ff0","#f00"];class j extends f.Z{constructor(e){e=e||{};let t=Object.assign({},e);delete t.gradient,delete t.radius,delete t.blur,delete t.weight,super(t),this.gradient_=null,this.addChangeListener(S.GRADIENT,this.handleGradientChanged_),this.setGradient(e.gradient?e.gradient:Z),this.setBlur(void 0!==e.blur?e.blur:15),this.setRadius(void 0!==e.radius?e.radius:8);let n=e.weight?e.weight:"weight";this.weightFunction_="string"==typeof n?e=>e.get(n):n,this.setRenderOrder(null)}getBlur(){return this.get(S.BLUR)}getGradient(){return this.get(S.GRADIENT)}getRadius(){return this.get(S.RADIUS)}handleGradientChanged_(){this.gradient_=function(e){let t=(0,y.E4)(1,256),n=t.createLinearGradient(0,0,1,256),r=1/(e.length-1);for(let t=0,i=e.length;t<i;++t)n.addColorStop(t*r,e[t]);return t.fillStyle=n,t.fillRect(0,0,1,256),t.canvas}(this.getGradient())}setBlur(e){this.set(S.BLUR,e)}setGradient(e){this.set(S.GRADIENT,e)}setRadius(e){this.set(S.RADIUS,e)}createRenderer(){let e=new b.k().addAttribute("float a_prop_weight").addVarying("v_prop_weight","float","a_prop_weight").addUniform("float u_size").addUniform("float u_blurSlope").setSymbolSizeExpression("vec2(u_size)").setSymbolColorExpression("vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * u_blurSlope) * v_prop_weight)");return new v.Z(this,{className:this.getClassName(),attributes:[{name:"weight",callback:e=>{let t=this.weightFunction_(e);return void 0!==t?(0,w.uZ)(t,0,1):1}}],uniforms:{u_size:()=>(this.get(S.RADIUS)+this.get(S.BLUR))*2,u_blurSlope:()=>this.get(S.RADIUS)/Math.max(1,this.get(S.BLUR))},hitDetectionEnabled:!0,vertexShader:e.getSymbolVertexShader(),fragmentShader:e.getSymbolFragmentShader(),postProcesses:[{fragmentShader:`
            precision mediump float;

            uniform sampler2D u_image;
            uniform sampler2D u_gradientTexture;
            uniform float u_opacity;

            varying vec2 v_texCoord;

            void main() {
              vec4 color = texture2D(u_image, v_texCoord);
              gl_FragColor.a = color.a * u_opacity;
              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;
              gl_FragColor.rgb *= gl_FragColor.a;
            }`,uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}renderDeclutter(){}}var R=n(4865);let E=()=>{let e=document.getElementById("blur"),t=document.getElementById("radius"),n=new j({source:new u.Z({url:R.uj,format:new _.ZP({extractStyles:!1})}),blur:parseInt(e.value,10),radius:parseInt(t.value,10),weight:function(e){let t=e.get("name"),n=parseFloat(t.substr(2));return n-5}});new x.Z({source:new h({layer:"stamen_toner"})});let r=new s.Z({target:"map",layers:[new x.Z({source:new c.Z,visible:!0,preload:1/0}),n,...R.f?[new x.Z({source:new p.Z})]:[]],view:new l.ZP({center:[0,0],zoom:2})});return e.addEventListener("input",function(){n.setBlur(parseInt(e.value,10))}),t.addEventListener("input",function(){n.setRadius(parseInt(t.value,10))}),r.getLayers().getArray()[0].on(["postrender"],e=>{e.context.globalCompositeOperation="color",e.context.fillStyle="rgba(0,0,0,0.9)",e.context.fillRect(0,0,e.context.canvas.width,e.context.canvas.height),e.context.globalCompositeOperation="overlay",e.context.fillStyle="rgb("+[200,200,200].toString()+")",e.context.fillRect(0,0,e.context.canvas.width,e.context.canvas.height),e.context.globalCompositeOperation="source-over",e.context.canvas.style.filter="invert(99%)"}),r},k=()=>{let e=(0,i.useRef)(null);return(0,i.useEffect)(()=>{e.current&&E()},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o(),{children:[(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,r.jsx)("title",{children:"HeatMaps"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{width:"calc(100% - 300px)",float:"right"},children:(0,r.jsx)("div",{id:"map",className:"map",ref:e,children:(0,r.jsx)("div",{id:"info"})})}),(0,r.jsx)("div",{style:{width:300,float:"left",padding:10},children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"cls",children:[(0,r.jsx)("hr",{}),(0,r.jsx)("span",{className:"head",children:"HeatMap "}),(0,r.jsx)("button",{type:"button",className:"btn btn-success btn-sm btn-block",id:"goRoadMap",children:"Dark Map Google"}),(0,r.jsx)("div",{className:"cls"})]}),(0,r.jsxs)("form",{children:[(0,r.jsx)("label",{htmlFor:"radius",children:"Radius Size"}),(0,r.jsx)("input",{id:"radius",type:"range",min:"1",max:"50",step:"1",defaultValue:"5"}),(0,r.jsx)("div",{className:"cls"}),(0,r.jsx)("label",{htmlFor:"blur",children:"Blur Size"}),(0,r.jsx)("input",{id:"blur",type:"range",min:"1",max:"50",step:"1",defaultValue:"15"})]})]})})]})]})};var D=k}},function(e){e.O(0,[715,280,279,488,646,244,193,774,888,179],function(){return e(e.s=1400)}),_N_E=e.O()}]);