(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[656],{6148:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/demo",function(){return n(9345)}])},4865:function(e,t,n){"use strict";n.d(t,{G2:function(){return i},LK:function(){return s},YF:function(){return d},eA:function(){return c},f:function(){return a},fY:function(){return l},gb:function(){return g},r5:function(){return u},r8:function(){return r},tm:function(){return p},uH:function(){return m},uj:function(){return f}});var o=n(6835);let r=1,i=16,a=!1,s=!1,l=(0,o.mi)([105.783089061,21.007448175]),c=(0,o.mi)([105.77148046,21.007552187]),u=(0,o.mi)([105.794633289,21.00786928]),d=(0,o.mi)([105.813080887,21.076551416]),m=(0,o.mi)([105.735447973,21.057766731]),g=(0,o.mi)([16.340115111,48.232346294]),p=(0,o.mi)([126.980366,37.52654]),f="https://raw.githubusercontent.com/thanktu/thanktu.github.io/main/data/kml_data.kml"},9345:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var o=n(5893),r=n(7294),i=n(9008),a=n.n(i),s=n(5536),l=n(1090),c=n(7276),u=n(7539),d=n(4540),m=n(9006);function g(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"225,0,0",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:200,r=new l.Z({geometry:new c.Z([e,t],o)});return r.setStyle(new u.ZP({renderer(e,t){let[[o,r],[i,a]]=e,s=t.context,l=i-o,c=a-r,u=Math.sqrt(l*l+c*c),d=s.createRadialGradient(o,r,0,o,r,1.5*u);d.addColorStop(0,"rgba(".concat(n,",0)")),d.addColorStop(.5,"rgba(".concat(n,",0.2)")),d.addColorStop(1,"rgba(".concat(n,",0.8)")),s.beginPath(),s.arc(o,r,u,0,2*Math.PI,!0),s.fillStyle=d,s.fill(),s.arc(o,r,u,0,2*Math.PI,!0),s.strokeStyle="rgba(".concat(n,",1)"),s.stroke()}})),r}var p=n(8240),f=n(2241),h=n(6689),w=n(9261),x=n(8266),b=n(6263),y=n(6835),Z=n(188),v=n(2370),j=n(1345),N=n(8958),E=n(283),k=n(1280),P=n(7315),F=n(9093),G=n(3122),I=n(7842),T=n(3223),M=n(2083),S=n(9242),C=n(1609),Y=n(8641),L=n(1335),_=n(4865);let A=()=>{let e,t,n,o,r;let i=new d.Z({coordinateFormat:(0,m.Fj)(9),projection:"EPSG:4326",className:"custom-mouse-position",target:document.getElementById("mouse-position")}),a=g(_.fY[0],_.fY[1],"20,45,220",200),c=g(_.eA[0],_.eA[1],"225,0,0",500),A=g(_.YF[0],_.YF[1],"0,0,0",800),B=document.getElementById("popup"),O=document.getElementById("popup-content"),V=document.getElementById("popup-closer"),z=new T.Z({element:B,autoPan:{animation:{duration:250}}});V.onclick=function(){return z.setPosition(void 0),V.blur(),!1};let R=[],D=new l.Z({geometry:new Z.Z([_.r5[0],_.r5[1]]),name:"Nothing Here :D",population:4e3,rainfall:500}),H=new u.ZP({image:new v.Z({anchor:[.5,46],anchorXUnits:"fraction",anchorYUnits:"pixels",src:"icon.png"})});D.setStyle(H);let U=new l.Z({geometry:new Z.Z([_.fY[0],_.fY[1]]),name:"Lotteeeee :D",population:5e3,rainfall:1e3}),q=new u.ZP({image:new v.Z({anchor:[.5,46],anchorXUnits:"fraction",anchorYUnits:"pixels",src:"icon.png"})});U.setStyle(q),R.push(D),R.push(U);let X=new h.Z({features:R}),J=new h.Z({attributions:"NASA"}),K=["^",["/",["%",["+",["time"],["interpolate",["linear"],["get","year"],1850,0,2015,10]],10],10],.5],W={variables:{minYear:1850,maxYear:2015},filter:["between",["get","year"],["var","minYear"],["var","maxYear"]],"circle-radius":["*",["interpolate",["linear"],["get","mass"],0,4,2e5,13],["-",1.75,["*",K,.75]]],"circle-fill-color":["interpolate",["linear"],K,0,"green",1,"#db3db7"],"circle-opacity":["-",1,["*",K,.75]]},$=document.getElementById("min-year"),Q=document.getElementById("max-year");function ee(){let e=document.getElementById("status");e.querySelector("span.min-year").textContent=$.value,e.querySelector("span.max-year").textContent=Q.value}$.addEventListener("input",function(){W.variables.minYear=parseInt($.value),ee()}),Q.addEventListener("input",function(){W.variables.maxYear=parseInt(Q.value),ee()}),ee();let et=new XMLHttpRequest;et.open("GET","https://raw.githubusercontent.com/thanktu/thanktu.github.io/main/data/filter_data.csv"),et.onload=function(){let e;let t=et.responseText,n=[],o=t.indexOf("\n")+1;for(;-1!=(e=t.indexOf("\n",o));){let r=t.substr(o,e-o).split(",");o=e+1;let i=(0,y.mi)([parseFloat(r[4]),parseFloat(r[3])]);isNaN(i[0])||isNaN(i[1])||n.push(new l.Z({mass:parseFloat(r[1])||0,year:parseInt(r[2])||0,geometry:new Z.Z(i)}))}J.addFeatures(n)},et.send();let en=Math.PI/2,eo=new j.Z({color:"rgba(85, 13, 0, 0.4)"}),er=new N.Z({color:"rgba(24, 85, 0, 1)",width:1.5}),ei=new j.Z({color:"rgba(85, 13, 102, 0.3)"}),ea=new j.Z({color:"rgba(85, 15, 0, 0.7)"}),es=new j.Z({color:"#fff"}),el=new N.Z({color:"rgba(0, 0, 0, 0.6)",width:3}),ec=new E.Z({radius:14,fill:ea}),eu=new E.Z({radius:20,fill:ei}),ed=new v.Z({src:"./emoticon-cool.svg"}),em=new v.Z({src:"./emoticon-cool-outline.svg"});function eg(e){return new u.ZP({geometry:e.getGeometry(),image:e.get("LEISTUNG")>5?ed:em})}function ep(n,o){if(n!==e||o!==t)return null;let r=n.get("features"),i=n.getGeometry().getCoordinates();return(function(e,t,n){let o;let r=28*(2+e)/(2*Math.PI),i=2*Math.PI/e,a=[];r=Math.max(r,35)*n;for(let n=0;n<e;++n)o=en+n*i,a.push([t[0]+r*Math.cos(o),t[1]+r*Math.sin(o)]);return a})(r.length,n.getGeometry().getCoordinates(),o).reduce((e,t,n)=>{let o=new Z.Z(t),a=new M.Z([i,t]);return e.unshift(new u.ZP({geometry:a,stroke:er})),e.push(eg(new l.Z({...r[n].getProperties(),geometry:o}))),e},[])}function ef(e){if(e!==n)return null;let t=e.get("features"),o=t.map(e=>e.getGeometry().getCoordinates());return new u.ZP({geometry:new S.ZP([(0,s.Z)(o)]),fill:eo,stroke:er})}let eh=new h.Z({format:new C.Z,url:"https://raw.githubusercontent.com/thanktu/thanktu.github.io/main/data/dynamic_cluster.json"}),ew=new w.Z({attributions:'Data: <a href="https://www.data.gv.at/auftritte/?organisation=stadt-wien">Stadt Wien</a>',distance:35,source:eh}),ex=new P.Z({source:ew,style:ef}),eb=new P.Z({source:ew,style:function(e){let t=e.get("features").length;if(t>1)return[new u.ZP({image:eu}),new u.ZP({image:ec,text:new k.Z({text:t.toString(),fill:es,stroke:el})})];let n=e.get("features")[0];return eg(n)}}),ey=new P.Z({source:ew,style:ep}),eZ=new h.Z;fetch("https://raw.githubusercontent.com/thanktu/thanktu.github.io/main/data/roads-seoul.geojson").then(function(e){return e.json()}).then(function(e){let t=new C.Z,n=t.readFeatures(e),o=n[0],r=t.writeFeatureObject(o),i=L.sIr(r,"kilometers");for(let e=1;e<=i/.2;e++){let n=L.$1t(r,.2*e,"kilometers"),o=t.readFeature(n);o.getGeometry().transform("EPSG:4326","EPSG:3857"),eZ.addFeature(o)}o.getGeometry().transform("EPSG:4326","EPSG:3857"),eZ.addFeature(o)});let ev=new F.Z({source:new x.Z});ev.on("prerender",e=>{if(e.context){let t=e.context;t.filter="grayscale(80%) invert(100%) ",t.globalCompositeOperation="source-over"}}),ev.on("postrender",e=>{if(e.context){let t=e.context;t.filter="none"}});let ej=new p.Z({target:"map",controls:(0,G.c)().extend([i]),overlays:[z],layers:[new F.Z({source:new x.Z,className:"ol_bw"}),new P.Z({source:new h.Z({features:[a]})}),new P.Z({source:new h.Z({features:[c]})}),new P.Z({source:new h.Z({features:[A]})}),new P.Z({source:X}),new I.Z({style:W,source:J,disableHitDetection:!1}),ex,eb,ey,new P.Z({source:eZ}),..._.f?[new F.Z({source:new b.Z})]:[]],view:new f.ZP({center:[0,0],zoom:2})});document.getElementById("zoom-out").onclick=function(){let e=ej.getView(),t=e.getZoom();e.setZoom(t-_.r8)},document.getElementById("zoom-in").onclick=function(){let e=ej.getView(),t=e.getZoom();e.setZoom(t+_.r8)};let eN=document.getElementById("popupIcon"),eE=new T.Z({element:eN,positioning:"bottom-center",stopEvent:!1});function ek(e,t){document.getElementById(e).addEventListener("click",t)}function eP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.G2,n=arguments.length>2?arguments[2]:void 0,o=ej.getView();o.setZoom(t);let r=o.getZoom(),i=2,a=!1;function s(e){--i,!a&&(0!==i&&e||(a=!0,n(e)))}o.animate({center:e,duration:2e3},s),o.animate({zoom:r-1,duration:1e3},{zoom:r,duration:1e3},s)}ej.addOverlay(eE),ej.on("movestart",function(){o&&(o.dispose(),o=void 0)}),ek("goToLotte",()=>eP(_.YF,_.G2,function(){})),ek("goToMarriot",()=>eP(_.fY,_.G2,function(){})),ek("goToIcon",()=>eP(_.r5,_.G2,function(){})),ek("goToFilterArea",()=>eP(_.uH,2,function(){})),ek("goToCluster",()=>eP(_.gb,11,function(){})),ek("goRoadMap",()=>eP(_.tm,16,function(){})),ek("goToMulty",()=>{let e=ej.getView();e.setZoom(_.G2);let t=[_.YF,_.fY,_.r5,_.YF,_.fY,_.r5],n=-1;!function e(o){if(o){if(++n<t.length){let o=0===n?0:750;setTimeout(function(){eP(t[n],_.G2,e)},o)}else alert("Complete :v")}else alert("Cancelled")}(!0)}),function e(){ej.render(),window.requestAnimationFrame(e)}();let eF=document.getElementById("info");eF.style.pointerEvents="none";let eG=new bootstrap.Tooltip(eF,{animation:!1,customClass:"pe-none",offset:[0,5],title:"-",trigger:"manual"}),eI=function(e,t){let n=t.closest(".ol-control")?void 0:ej.forEachFeatureAtPixel(e,function(e){return e});n&&(eF.style.left=e[0]+"px",eF.style.top=e[1]+"px",n!==r&&eG.setContent({".tooltip-inner":n.get("name")})),r=n};return ej.on("pointermove",e=>{eb.getFeatures(e.pixel).then(e=>{e[0]!==n&&(n=e[0],ex.setStyle(ef),ej.getTargetElement().style.cursor=n&&n.get("features").length>1?"pointer":"")});let t=ej.getEventPixel(e.originalEvent),o=ej.hasFeatureAtPixel(t);if(ej.getTargetElement().style.cursor=o?"pointer":"",e.dragging){r=void 0;return}eI(t,e.originalEvent.target)}),ej.on("click",n=>{eb.getFeatures(n.pixel).then(n=>{if(n.length>0){let o=n[0].get("features");if(o.length>1){let r=(0,Y.lJ)();o.forEach(e=>(0,Y.l7)(r,e.getGeometry().getExtent()));let i=ej.getView(),a=ej.getView().getResolution();i.getZoom()===i.getMaxZoom()||(0,Y.dz)(r)<a&&(0,Y.Cr)(r)<a?(e=n[0],t=a,ey.setStyle(ep)):i.fit(r,{duration:500,padding:[50,50,50,50]})}}}),eI(n.pixel,n.originalEvent.target)}),ej.on("singleclick",function(e){if(!_.LK)return;let t=e.coordinate,n=(0,m.V7)((0,y.bU)(t));O.innerHTML='\n      <p style="font-weight: 700">\n        Click Location:\n      </p>\n      <code> '.concat(n,"</code>\n      <code> Latitude: ").concat(JSON.stringify(t[0]),"</code>\n      <code> Longitude: ").concat(JSON.stringify(t[1]),"</code>\n    "),z.setPosition(t)}),ej.getTargetElement().addEventListener("pointerleave",function(){eG.hide(),r=void 0}),ej},B=()=>{let e=(0,r.useRef)(null);return(0,r.useEffect)(()=>{e.current&&A()},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a(),{children:[(0,o.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,o.jsx)("title",{children:"Maps"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{width:"calc(100% - 300px)",float:"right"},children:(0,o.jsxs)("div",{id:"map",className:"map",ref:e,children:[(0,o.jsx)("div",{id:"popupIcon"}),(0,o.jsxs)("div",{id:"popup",className:"ol-popup",children:[(0,o.jsx)("a",{href:"#",id:"popup-closer",className:"ol-popup-closer"}),(0,o.jsx)("div",{id:"popup-content"})]}),(0,o.jsx)("div",{id:"info"})]})}),(0,o.jsx)("div",{style:{width:300,float:"left",padding:10},children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"cls"}),(0,o.jsx)("button",{className:"btn btn-outline-primary btn-sm",id:"zoom-out",children:"Zoom out"}),(0,o.jsx)("button",{className:"btn btn-outline-primary btn-sm",id:"zoom-in",children:"Zoom in"}),(0,o.jsx)("div",{className:"cls"}),(0,o.jsx)("button",{className:"btn btn-primary btn-sm",id:"goToLotte",children:"GoTo Lotte"}),(0,o.jsx)("button",{className:"btn btn-primary btn-sm",id:"goToMarriot",children:"GoTo Marriot"}),(0,o.jsx)("button",{className:"btn btn-primary btn-sm",id:"goToIcon",children:"Go Icon"}),(0,o.jsx)("div",{className:"cls"}),(0,o.jsx)("button",{type:"button",className:"btn btn-success btn-sm btn-block",id:"goToMulty",children:"Go All"})]}),(0,o.jsxs)("div",{className:"cls",children:[(0,o.jsx)("hr",{}),(0,o.jsx)("div",{className:"cls"}),(0,o.jsx)("button",{type:"button",className:"btn btn-primary btn-sm btn-block",id:"goToFilterArea",children:"Filter Area"}),(0,o.jsx)("div",{className:"cls"}),(0,o.jsxs)("form",{children:[(0,o.jsxs)("div",{id:"status",children:[(0,o.jsx)("h4",{children:"Filter:"}),(0,o.jsx)("span",{className:"min-year"})," and ",(0,o.jsx)("span",{className:"max-year"})]}),(0,o.jsx)("label",{htmlFor:"min-year",children:"Minimum year:"}),(0,o.jsx)("input",{id:"min-year",type:"range",min:1850,max:2015,step:1,defaultValue:1850}),(0,o.jsx)("label",{htmlFor:"max-year",children:"Maximum year:"}),(0,o.jsx)("input",{id:"max-year",type:"range",min:1850,max:2015,step:1,defaultValue:2015})]})]}),(0,o.jsxs)("div",{className:"cls",children:[(0,o.jsx)("hr",{}),(0,o.jsx)("div",{className:"cls"}),(0,o.jsx)("span",{className:"head",children:"Cluster Data,Group & Zoom to Extent "}),(0,o.jsx)("button",{type:"button",className:"btn btn-warning btn-sm btn-block",id:"goToCluster",children:"Go -> Cluster"})]}),(0,o.jsxs)("div",{className:"cls",children:[(0,o.jsx)("hr",{}),(0,o.jsx)("span",{className:"head",children:"ROAD Map "}),(0,o.jsx)("button",{type:"button",className:"btn btn-success btn-sm btn-block",id:"goRoadMap",children:"RoadMap Area"}),(0,o.jsx)("div",{className:"cls"})]}),(0,o.jsxs)("div",{className:"cls",children:[(0,o.jsx)("hr",{}),(0,o.jsx)("span",{style:{fontWeight:"bold"},children:"Cursor Location:"}),(0,o.jsx)("span",{id:"mouse-position",children:" "})]})]})})]})]})};var O=B}},function(e){e.O(0,[715,280,279,488,646,244,315,842,480,774,888,179],function(){return e(e.s=6148)}),_N_E=e.O()}]);